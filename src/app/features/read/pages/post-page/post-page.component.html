<main class="max-w-screen-sm mx-auto p-4 grid grid-cols-1 gap-4">
  <header class="flex gap-4 items-start" *ngIf="pa; else load">
    <div class="grid grid-cols-1 gap-4">
      <h1 class="grow text-4xl font-black leading-tight">
        {{ pa.post.title }}
      </h1>
      <h2 class="text-xl font-semibold">{{ pa.post.description }}</h2>
    </div>
    <BookmarkButton [isBookmarked]="true" />
  </header>
  <TagGroup *ngIf="pa; else load">
    <Tag />
    <Tag />
    <Tag />
  </TagGroup>
  <PostDetails
    [createdTime]="pa.post.createdTime"
    [lastUpdatedTime]="pa.post.lastUpdatedTime"
    *ngIf="pa; else load"
  />
  <article class="grid grid-cols-1 gap-6">
    <div class="flex gap-4 items-center" *ngIf="pa; else load">
      <PostOwner [author]="pa.author" />
      <FollowButton [isFollowed]="true" />
    </div>
    <div
      *ngIf="pa; else load"
      class="rounded-lg overflow-hidden object-cover w-72 h-72 lg:w-96 lg:h-96 justify-self-center"
    >
      <img
        [src]="checkImage(pa.post.coverImage)"
        class="object-cover w-full h-full"
      />
    </div>
    <div class="p-4" id="reader"></div>
  </article>
  <div class="flex gap-8">
    <LoveButton />
    <ShareButton />
  </div>
  <hr />
  <div class="grid grid-cols-1 gap-8">
    <h3 class="text-xl font-bold">Comments</h3>
    <CommentGroup [caos]="mockComments"></CommentGroup>
    <ng-container *ngIf="loginStatus; else goLogin">
      <CommentBox />
    </ng-container>
  </div>
</main>

<ng-container *ngIf="isShowCodePage && code">
  <CodePage [code]="code" (closeCommand)="closeCodePage()" />
</ng-container>

<ng-template #load>
  <SingleLineSkeleton></SingleLineSkeleton>
</ng-template>

<ng-template #imageload>
  <SingleLineSkeleton></SingleLineSkeleton>
</ng-template>

<ng-template #goLogin>
  <p>
    <a routerLink="/auth/login" class="underline font-semibold">เข้าสู่ระบบ</a>
    เพื่อเข้าแสดงความคิดเห็น
  </p>
</ng-template>
